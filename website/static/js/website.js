// Generated by CoffeeScript 1.9.3
(function() {
  var addImageElement, initializeDoubleKnockdownPage, positionFooter, removePageTitleStyleIfEmpty, setResizeHandler, showNextImage;

  $(document).ready(function() {
    removePageTitleStyleIfEmpty();
    setResizeHandler();
    positionFooter();
    return initializeDoubleKnockdownPage();
  });

  initializeDoubleKnockdownPage = function() {
    var rotatingImages;
    rotatingImages = $(".rotating-images");
    rotatingImages.each(function() {
      var el, firstImage;
      el = $(this);
      firstImage = el.find(".individual-image").first();
      addImageElement(firstImage);
      return firstImage.addClass("show");
    });
    return rotatingImages.find(".experiment-image-wrapper").click(function() {
      var rotatingImage;
      rotatingImage = $(this).closest(".rotating-images");
      return showNextImage(rotatingImage);
    });
  };

  showNextImage = function(rotatingImage) {
    var currentImage, i, images, nextImage;
    images = rotatingImage.find(".individual-image");
    currentImage = rotatingImage.find(".show");
    i = images.index(currentImage);
    images.eq(i).removeClass("show");
    i = (++i) % images.length;
    nextImage = images.eq(i);
    nextImage.addClass("show");
    return addImageElement(nextImage);
  };

  addImageElement = function(image) {
    var imageSrc, imageWrapper;
    imageWrapper = image.find(".experiment-image-wrapper");
    imageSrc = imageWrapper.attr("data-src");
    return imageWrapper.html("<img src='" + imageSrc + "' \>");
  };

  removePageTitleStyleIfEmpty = function() {
    var pageTitle;
    pageTitle = $("#page-title");
    if (pageTitle.is(":empty")) {
      return pageTitle.remove();
    }
  };

  setResizeHandler = function() {
    return $(window).resize(function() {
      return positionFooter();
    });
  };

  positionFooter = function() {
    var contentHeight, cssDict, footer, footerHeight, footerWidth, windowHeight;
    footer = $("#footer");
    footerHeight = footer.outerHeight();
    footerWidth = footer.width();
    windowHeight = $(window).height();
    contentHeight = $("html").height();
    if (footer.css("position") === "absolute") {
      contentHeight += footerHeight;
    }
    if (contentHeight < windowHeight) {
      cssDict = {
        position: "absolute",
        bottom: parseInt($("body").css("paddingBottom"), 10),
        left: parseInt($("body").css("paddingLeft"), 10),
        width: footerWidth
      };
    } else {
      cssDict = {
        position: "static"
      };
    }
    return footer.css(cssDict);
  };

}).call(this);
