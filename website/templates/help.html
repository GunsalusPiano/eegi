{% extends 'base.html' %}

{% block body_id %}help-page{% endblock %}


{% block page_title %}User Manual for eegi Website{% endblock %}


{% block content %}
<div id="intro" class="page-section">
  <ul>
    <li><a href="#navigating">Navigating data</a></li>
    <li><a href="#changing">Changing data</a></li>
  </ul>
  <hr>
</div>


<div class="page-section">
  <ul id="documentation">
    <li id="navigating"><h3>Navigating data</h3></li>


    <li id="changing"><h3>Changing data</h3></li>

    <ul>
      <li>
      <h4>Custom Interfaces</h4>
      </li>

      <ul>
        <li>
        <h5>Add a single Experiment Plate</h5>

        Use the <a href="{% url 'add_experiment_plate_url' %}">
          Add Experiment Page</a>.
        </li>

        <li>
        <h5>Change one or more Experiment Plates</h5>

        Select the plates you would like to change using
        the filters on the
        <a href="{% url 'find_experiment_plates_url' %}">
          Find Experiments Page</a>.
        If you are logged in with the correct permissions,
        you will see a link at the bottom to "Change these plates".
        From there, you can change any plate-wide attributes.
        </li>

        <li>
        <h5>Toggle junk on a single Experiment Well</h5>

        Go to the page for that experiment well
        (e.g., <a href="{% url 'experiment_well_url' '30010_A12' %}">
          here is 30010_A12</a>).
        If you are logged in with the correct permissions,
        you will see a button at the bottom to "Toggle Junk".
        </li>

        <li>
        <h5>Add ManualScores</h5>

        <span class="error-message">TODO:
        build a general scoring interface for any primary and
        SUP secondary rescoring needs.</span>
        </li>
      </ul>


      <li>
      <h4>Django Admin Interface</h4>

      The following operations can be done with the straightforward
      <a href="{% url 'admin:index' %}">Django Admin Interface</a>.

      </li>

      <ul>
        <li>
        <h5>Add/Update/Delete Users, Groups, and Permissions</h5>
        </li>

        <li>
        <h5>Add/Update/Delete Worm Strains</h5>
        </li>

        <li>
        <h5>Add/Update/Delete Manual Score Codes</h5>
        </li>

        <li>
        <h5>Change Worm Strain or Library Stock on a single Experiment Well</h5>
        </li>

        <li>
        <h5>Delete one or more Experiment Plates</h5>
        NOTE: Deleting an Experiment Plate in the Admin interface
        cascades to delete any associated Experiment Wells,
        Manual Scores, and Devstar Scores.
        Unless you are confident, marking junk may be preferred tactic.
        </li>
      </ul>


      <li>
      <h4>Django Management Scripts</h4>

      The following operations can be done with custom scripts that
      have been integrated with Django's command-line management.
      To use these command-line tools, you should activate the proper
      Python virtualenv, and be in the project root.

      To list all available scripts (organized by which app they are in):
      <code>./manage.py help</code>

      Note that some of these scripts ship with Django (for example,
      scripts to generate and apply database migrations), while others
      were built custom for this project.

      To run a particular script:
      <code>./manage.py scriptname [args]</code>

      For help with a particular script, including arguments:
      <code>./manage.py scriptname --help</code>

      For further help, please consult the command's docstring in the code.
      </li>

      <ul>
        <li>
        <h5>Add bulk Experiment Plates</h5>
        <code>./manage.py import_google_doc_data</code>

        This script works in concert with the
        <a href="{{ batch_data_entry_gdoc_url }}">
          {{ batch_data_entry_gdoc_name }}</a>
        Google Doc, which should be filled in with the new
        experiments prior to running the command.
        </li>

        <li>
        <h5>Update Clone mapping data</h5>
        <code>./manage.py import_mapping_data</code>

        This script connects to Firoz's RNAiCloneMapper database
        to update the gene mappings for the clones in this project.
        </li>

        <li>
        <h5>Update Gene functional descriptions</h5>
        <code>./manage.py import_functional_descriptions</code>

        This script updates the functional descriptions of the Genes
        in this database, using a file of functional descriptions
        from WormBase.
        </li>

        <li>
        <h5>Import sequencing data</h5>
        <code>./manage.py import_legacy_sequencing_data </code>

        This script imports sequencing data from the Genewiz dump on
        pleiades. It works in concert with a file specifying which
        Genewiz tracking numbers correspond to which sequencing plates,
        and with a reference of which library wells correspond to
        which sequencing wells.

        <span class="error-message">TODO:
          The current script uses the legacy database as the reference
          for which library wells correspond with which sequencing wells.
          It needs to be modified to work for sequencing needs going forward.
          The typical pipeline is to generate a CSV cherrypick list
          (in the standard source/destination format),
          do the cherrypicking, and then update the CSV
          for any changes/mistakes that occurred during cherrypicking.
          The plan is that this script should accept a finalized
          cherrypicking CSV.
        </span>
        </li>

        <li>
        <h5>Import BLAT hits of our sequencing data </h5>
        <code>./manage.py import_blat_results</code>

        This script adds the BLAT hits of our sequencing data
        to the database.

        <span class="error-message">TODO:
          Previously, Firoz performed the BLAT, and Katherine imported
          his txt results into our database. Ideally, we would
          modify Firoz's script to update the database directly.
        </span>
        </li>

        <li>
        <h5>Update LibraryStock.consensus_clone field</h5>

        This script updates each library stock's "consensus clone",
        which is informed by our sequencing results.

        You should run this after receiving new sequencing results.

        <span class="error-message">TODO: build this, once relevant
          decisions are made!</span>
        </li>

        <li>
        <h5>Update Experiment.gi_score field</h5>

        This script updates each experiment's "gi score",
        which is informed by its DevStaR output and that of its controls.

        You should run this script after adding or updating Experiments and/or
        DevStaR Scores.

        <span class="error-message">TODO: build this with Michelle</span>
        </li>
      </ul>


      <li><h4>Cron Jobs</h4></li>

      <ul>
        <li>
        <h5>Pull original images from scopes (LG)<h5>
        </li>

        <li><h5>Generate thumbnail and medium res images (LG)</h5></li>

        <li><h5>Run DevStaR on new images (LG)</h5></li>

        <li><h5>Import DevStaR txt output into database</h5></li>

        <li>
        <h5>Back-up raw data (at least original images)
          to separate machine (LG)</h5>
        </li>

        <li><h5>Back-up database</h5>
        <span class="error-message">TODO:
          Katherine needs to activate this after her final
          legacy-database-sync.
        </span>
        </li>
      </ul>


      <li><h4>
        "Backend" only (extremely infrequent / special cases only)
      </h4></li>

      <ul>
        <li>
        <h5>Add/Update/Delete Clones</h5>
        </li>

        <li>
        <h5>
          Add/Update/Delete LibraryPlates and/or LibraryStocks
        </h5>
        </li>
      </ul>
    </ul>
  </ul>
</div>


{% endblock content %}
