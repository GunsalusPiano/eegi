{% extends "base.html" %}
{% load extra_template_tags %}

{% block body_id %}library-plates{% endblock %}
{% block page_title %}RNAi Library Plates{% endblock %}

{% block content %}
<div id="plate-filters">
  <a href="{% url 'library_plates_url' %}"
    {% ifequal request.GET.screen_stage None %}
    class="active"
    {% endifequal %}
  >All</a>

  <a href="{% url 'library_plates_url' %}?screen_stage=1"
    {% ifequal request.GET.screen_stage "1" %}
    class="active"
    {% endifequal %}
  >Primary screen</a>

  <a href="{% url 'library_plates_url' %}?screen_stage=2"
    {% ifequal request.GET.screen_stage "2" %}
    class="active"
    {% endifequal %}
  >Secondary screen</a>

  <!--
  Commented out due to current plate views expecting full 96-well plates
  <a href="{% url 'library_plates_url' %}?screen_stage=0"
    {% ifequal request.GET.screen_stage "0" %}
    class="active"
    {% endifequal %}
  >Source plates (not used for screening)</a>
  -->
</div>

<div id="results-header">
  <span id="total">
    {{ plates|length }} total plates.
  </span>

  <div class="pagination-status">
    {% if display_plates.has_previous %}
    <a href="?{% url_replace request 'page' display_plates.previous_page_number %}">
      previous</a>
    {% endif %}

    <span>
      Page {{ display_plates.number }}
      of {{ display_plates.paginator.num_pages }}.
    </span>

    {% if display_plates.has_next %}
    <a href="?{% url_replace request 'page' display_plates.next_page_number %}">
      next</a>
    {% endif %}
  </div>
</div>

<table class="grayscale striped nice-padding">
  <thead>
    <tr>
      <th>Plate Name</th>
      <th>Screen Stage</th>
      <th>Number of Wells</th>
    </tr>
  </thead>

  <tbody>
    {% for plate in display_plates %}
    <tr>
      <td>
        <a href="{% url 'library_plate_url' plate.id %}">{{ plate }}</a>
      </td>
      <td>{{ plate.screen_stage }}</td>
      <td>{{ plate.number_of_wells }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
