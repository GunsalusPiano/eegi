{% extends 'base.html' %}
{% load extra_tags %}


{% block body_id %}experiments{% endblock %}


{% block page_title %}Find Experiments{% endblock %}


{% block content %}

<div id="form-section" class="page-section gray-bubble">
  {% if form.errors %}
  <div id="form-errors" class="error-message">
    Please correct the error{{ form.errors|pluralize }} below.
  </div>
  {% endif %}

  <form action="" method="get">
    {{ form.as_p }}

    <p class="submit">
      <input type="submit" value="Submit">
    </p>
  </form>

  <div id="clear-form">
    <a href="{{ request.path }}">
      Clear all fields</a>
  </div>
</div>

<div class="page-section">
  {% ifnotequal experiments None %}
  <div id="results-header">
    <span id="total">
      {{ experiments|length }} matching
      experiment{{ experiments|pluralize }}
    </span>

    {% if experiments %}
    {% include 'pagination_status.html' with paginated=display_experiments %}
    {% endif %}
  </div>
  {% endifnotequal %}

  {% for experiment in display_experiments %}
  <table class="grayscale">
    <thead>
      <tr>
        <th class="pretty-th">
          <h4>
            <a href="{{ experiment.get_absolute_url }}">
              {{ experiment.id }}</a>
          </h4>

          {% include 'experiment_spans.html' %}
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          {% include 'image.html' %}
        </td>
      </tr>
    </tbody>
  </table>
  {% endfor %}

  {% if experiments %}
  <div id="results-header">
    <span id="total">
      {{ experiments|length }} matching
      experiment{{ experiments|pluralize }}
    </span>

    {% if experiments %}
    {% include 'pagination_status.html' with paginated=display_experiments %}
    {% endif %}
  </div>
  {% endif %}
</div>

{% endblock %}
