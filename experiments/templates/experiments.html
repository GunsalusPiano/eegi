{% extends "base.html" %}
{% load extra_template_tags %}

{% block body_id %}experiments{% endblock %}
{% block page_title %}Experiments{% endblock %}

{% block content %}

Find an experiment by exact id:

<form id="exact-id-form" action="" method="get">
  <input type="text" name="exact_id">
  <input type="submit" value="Submit">
</form>

{% if exact_id_errors %}
<span id="exact-id-errors" class="error-message">
  {% for error in exact_id_errors %}
    {{ error }}<br>
  {% endfor %}
</span>
{% endif %}

<hr>

Find experiments with filters:

{% if form.errors %}
<span class="error-message">
  Please correct the error{{ form.errors|pluralize }} below.
</span>
{% endif %}

<form id="experiment-filter-form" action="" method="get">
  <table>
    {{ form.as_table }}
  </table>
  <input type="submit" value="Submit">
</form>

{% ifnotequal total_results None %}
<div id="results-header">
  <span id="total">
    {{ total_results }} total experiments.
  </span>

  {% if total_results %}
  <div class="pagination-status">
    {% if display_experiments.has_previous %}
    <a href="?{% url_replace request 'page' display_experiments.previous_page_number %}">
      previous
    </a>
    {% endif %}

    <span>
      Page {{ display_experiments.number }}
      of {{ display_experiments.paginator.num_pages }}.
    </span>

    {% if display_experiments.has_next %}
    <a href="?{% url_replace request 'page' display_experiments.next_page_number %}">
      next
    </a>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endifnotequal %}

{% if total_results %}
<table id="experiment-results" class="striped nice-padding">
  <thead>
    <tr>
      <th>Experiment ID</th>
      <th>Worm Strain</th>
      <th>Worm Genotype</th>
      <th>RNAi Library Plate</th>
      <th>Temperature</th>
      <th>Date</th>
      <th>Is Junk</th>
      <th>Comment</th>
    </tr>
  </thead>

  <tbody>
    {% for experiment in display_experiments %}
    <tr>
      <td>
        <a href="{% url 'experiment_plate_url' experiment.id %}">
          {{ experiment.id }}</a>
      </td>
      <td>{{ experiment.worm_strain }}</td>
      <td>{{ experiment.worm_strain__genotype }}</td>
      <td>{{ experiment.library_plate }}</td>
      <td>{{ experiment.temperature|get_celsius_string }}</td>
      <td>{{ experiment.date }}</td>
      <td>{{ experiment.is_junk }}</td>
      <td>{{ experiment.comment }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

{% endblock %}
