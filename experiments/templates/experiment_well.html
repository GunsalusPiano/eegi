{% extends "base.html" %}
{% load extra_tags %}

{% block body_id %}experiment-well{% endblock %}

{% block page_title %}
Experiment {{ experiment.id }}, Well {{ well }}
{% endblock %}

{% block content %}
<div class="cleared-spaced-spans">
  <span>
    Library plate:
    <a href="{% url 'library_plate_url' experiment.library_plate.id %}">
    {{ experiment.library_plate }}
    </a>
  </span>

  <span>
    Intended RNAi Clone: {{ library_well.intended_clone}}
  </span>

  <span>
    Worm strain:
    <a href="{{ experiment.worm_strain.url }}">
      {{ experiment.worm_strain }}</a>
  </span>

  {% if experiment.worm_strain.genotype %}
  <span>Worm genotype: {{ experiment.worm_strain.genotype }}</span>
  {% endif %}

  <span>
    Temperature: {{ experiment.temperature|get_celsius_string }}
    ({% get_screen_type experiment.temperature experiment.worm_strain %})
  </span>

  <span>Date: {{ experiment.date|date:"SHORT_DATE_FORMAT" }}</span>

  {% if experiment.is_junk %}
  <span class="error-message">JUNK</span>
  {% endif %}

  {% if experiment.comment %}
  <span>Comment: {{ experiment.comment }}</span>
  {% endif %}

  {% if experiment.score_summary %}
  <span>Scores: {{ experiment.score_summary }}</span>
  {% endif %}

  {% if library_well.intended_clone and not library_well.intended_clone.is_control and not experiment.worm_strain.is_control %}

  <span>
    <a href="{% url 'double_knockdown_url' experiment.worm_strain.id library_well.intended_clone.id experiment.temperature %}">
      See with controls and all replicates.</a>
  </span>

  {% endif %}

  <span>
    <a href="{% url 'experiment_url' experiment.id %}">
      See entire experiment plate.</a>
  </span>

  {% if devstar_available %}
    {% if mode != 'devstar' %}

    <span>
      <a href="?mode=devstar">See DevStaR-labelled image</a>
    </span>

    {% else %}

    <span>
      <a href="?{% url_replace request 'mode' 'big' %}">
        See unlabelled image</a>
    </span>

    {% endif %}
  {% endif %}

</div>

{% include "image.html" with experiment=experiment well=well mode=mode %}

{% endblock %}
