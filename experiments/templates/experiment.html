{% extends "base.html" %}
{% load extra_tags %}

{% block body_id %}experiment-plate{% endblock %}
{% block page_title %}Experiment {{ experiment.id }}{% endblock %}

{% block content %}
<div class="cleared-spaced-spans">
  <span>
    Worm strain:
    <a href="{{ experiment.worm_strain.url }}">
      {{ experiment.worm_strain }}</a>
  </span>

  {% if experiment.worm_strain.genotype %}
    <span>Worm genotype: {{ experiment.worm_strain.genotype }}</span>
  {% endif %}

  <span>
    Library plate:
    <a href="{% url 'library_plate_url' experiment.library_plate.id %}">
    {{ experiment.library_plate }}
    </a>
  </span>

  <span>
    Temperature: {{ experiment.temperature|celsius }}
  </span>

  <span>Date: {{ experiment.date|date:"SHORT_DATE_FORMAT" }}</span>

  {% if experiment.is_junk %}
  <span class="error-message">JUNK</span>
  {% endif %}

  {% if experiment.comment %}
    <span>Comment: {{ experiment.comment }}</span>
  {% endif %}

  <span>
    <a href="{% url 'experiments_vertical_url' experiment.id %}">
      See vertical view of thumbnails</a>
    <br>
    <a href="{% url 'experiments_vertical_url' experiment.id %}?mode=big">
      See vertical view of full-size images</a>
    <br>
    <a href="{% url 'experiments_vertical_url' experiment.id %}?mode=devstar">
      See vertical view of DevStaR images</a>
  </span>
</div>

<table class="plate-96">
  {% regroup library_wells by row as library_wells_by_row %}
  {% for row in library_wells_by_row %}
  <tr>
    {% for library_well in row.list %}
      {% include "image_td.html" with experiment=experiment library_well=library_well mode=mode %}
    {% endfor %}
  </tr>
  {% endfor %}
</table>

{% endblock %}
