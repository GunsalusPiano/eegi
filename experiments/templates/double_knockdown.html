{% extends "base.html" %}
{% load extra_template_tags %}

{% block body_id %}double-knockdown{% endblock %}
{% block page_title %}
{{ strain }}, {{ clone }}, {{ temperature|get_celsius_string }}
{% endblock %}

{% block content %}
<div class="cleared-spaced-spans">
  <span>
    Worm Strain: {{ strain }}
    (Genotype: {{ strain.genotype }})
  </span>

  <span>RNAi Clone: {{ clone }}</span>

  <span>Temperature: {{ temperature|get_celsius_string }}
    {% with temperature|stringformat:"s" as tstring %}
      {% if tstring == strain.restrictive_temperature|stringformat:"s" %}
        (SUP screen)
      {% endif %}
      {% if tstring == strain.permissive_temperature|stringformat:"s" %}
        (ENH screen)
      {% endif %}
    {% endwith %}
  </span>
</div>

{% for position, dates in data.items %}
  {% for date, experiment_classes in dates.items %}
    <table class="double-knockdown-results">

      <th colspan="2">
        <h3>
          Clone located in plate {{ position.plate }},
          well {{ position.well }};
          tested on {{ date }}
        </h3>
      </th>

      <tr>
        <td>
          <span class="title">
            Double Knockdown
          </span>

          <div class="rotating-images">
          {% for experiment_class, experiments in experiment_classes.items %}
          {{ experiment_class }}
          {% for experiment in experiments %}
            <div class="individual-image">
              <span>
                Experiment {{ experiment.id }}, well {{ position.well }}
              </span>

              <div class="image-wrapper">
                <img src="{% get_image experiment position %}" \>
              </div>
            </div>
          {% endfor %}
          {% endfor %}
          </div>
        </td>

        <td>
          <span class="title">
            Mutant Only
          </span>
        </td>
      </tr>

      <tr>
        <td>
          <span class="title">
            RNAi Only
          </span>
        </td>

        <td>
          <span class="title">
            N2 control
          </span>
        </td>
      </tr>
    </table>
  {% endfor %}
{% endfor %}

{% endblock %}
