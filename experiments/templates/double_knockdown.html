{% extends "base.html" %}
{% load extra_template_tags %}

{% block body_id %}double-knockdown{% endblock %}

{% block page_title %}
{{ strain }} x {{ clone }}, at {{ temperature|get_celsius_string }}
{% endblock %}

{% block content %}
<div class="cleared-spaced-spans">
  <span>
    Worm strain:
    <a href="{{ strain.get_lab_website_url }}">
      {{ strain }}</a>
  </span>

  <span>
    Worm genotype: {{ strain.genotype }}
  </span>

  <span>
    RNAi clone: {{ clone }}
  </span>

  <span>
    Temperature: {{ temperature|get_celsius_string }}
    ({% get_screen_type temperature strain %})
  </span>
</div>

{% for rnai_well, date, experiments in data %}
  <table class="double-knockdown-results">
    <th colspan="2" class="table-title">
      Clone located in plate {{ rnai_well.plate }},
      well {{ rnai_well.well }};
      tested on {{ date }}
    </th>

    <tr>
      <th>Mutant ({{ strain.gene }}) + RNAi ({{ clone.id }})</th>
      <th>Mutant ({{ strain.gene }}) + L4440 control</th>
    </tr>

    <tr>
      <td>
        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"mutant_rnai" %}
          <div class="individual-image">
            <span class="image-title">
              {% get_image_title experiment rnai_well %}
              <a
                href="{% url 'experiment_well_url' experiment rnai_well.well %}">
              click to zoom</a>
            </span>

            <div class="experiment-image-wrapper"
              data-src="{% get_image experiment rnai_well %}">
            </div>
          </div>
        {% endfor %}
        </div>
      </td>

      <td>
        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"mutant_l4440" %}
          {% for l4440_well in experiment.library_plate.get_l4440_wells %}
            <div class="individual-image">
              <span class="image-title">
                {% get_image_title experiment l4440_well %}
                <a href="{% url 'experiment_well_url' experiment l4440_well.well %}">
                  click to zoom</a>
              </span>

              <div class="experiment-image-wrapper"
                data-src="{% get_image experiment l4440_well %}">
              </div>
            </div>
          {% endfor %}
        {% endfor %}
        </div>
      </td>
    </tr>

    <tr>
      <th>N2 control + RNAi ({{ clone.id }})</th>
      <th>N2 control + L4440 control</th>
    </tr>

    <tr>
      <td>
        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"n2_rnai" %}
          <div class="individual-image">
            <span class="image-title">
              {% get_image_title experiment rnai_well %}
              <a href="{% url 'experiment_well_url' experiment rnai_well.well %}">
                click to zoom</a>
            </span>

            <div class="experiment-image-wrapper"
              data-src="{% get_image experiment rnai_well %}">
            </div>
          </div>
        {% endfor %}
        </div>
      </td>

      <td>
        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"n2_l4440" %}
          {% for l4440_well in experiment.library_plate.get_l4440_wells %}
            <div class="individual-image">
              <span class="image-title">
                {% get_image_title experiment l4440_well %}
                <a href="{% url 'experiment_well_url' experiment l4440_well.well %}">
                  click to zoom</a>
              </span>

              <div class="experiment-image-wrapper"
                data-src="{% get_image experiment l4440_well %}">
              </div>
            </div>
          {% endfor %}
        {% endfor %}
        </div>
      </td>
    </tr>
  </table>
{% endfor %}

{% endblock %}
