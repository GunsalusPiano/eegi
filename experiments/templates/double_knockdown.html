{% extends "base.html" %}
{% load extra_template_tags %}

{% block body_id %}double-knockdown{% endblock %}
{% block page_title %}
{{ strain }}, {{ clone }}, {{ temperature|get_celsius_string }}
{% endblock %}

{% block content %}
<div class="cleared-spaced-spans">
  <span>
    Worm Strain: {{ strain }}
    (Genotype: {{ strain.genotype }})
  </span>

  <span>RNAi Clone: {{ clone }}</span>

  <span>Temperature: {{ temperature|get_celsius_string }}
    {% with temperature|stringformat:"s" as tstring %}
      {% if tstring == strain.restrictive_temperature|stringformat:"s" %}
        (SUP screen)
      {% endif %}
      {% if tstring == strain.permissive_temperature|stringformat:"s" %}
        (ENH screen)
      {% endif %}
    {% endwith %}
  </span>
</div>

{% for position, date, experiments in data %}
  <table class="double-knockdown-results">
    <th colspan="2">
      <h3>
        Clone located in plate {{ position.plate }},
        well {{ position.well }};
        tested on {{ date }}
      </h3>
    </th>

    <tr>
      <td>
        <span class="title">
          Double Knockdown
        </span>

        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"mutant_rnai" %}
          <div class="individual-image">
            <span>
              Experiment {{ experiment.id }}, well {{ position.well }}
            </span>

            <div class="image-wrapper">
              <img src="{% get_image experiment position %}" \>
            </div>
          </div>
        {% endfor %}
        </div>
      </td>

      <td>
        <span class="title">
          Mutant Only
        </span>

        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"mutant_l4440" %}
          <div class="individual-image">
            <span>
              Experiment {{ experiment.id }}, well {{ position.well }}
            </span>

            <div class="image-wrapper">
              <img src="{% get_image experiment position %}" \>
            </div>
          </div>
        {% endfor %}
        </div>
      </td>
    </tr>

    <tr>
      <td>
        <span class="title">
          RNAi Only
        </span>

        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"n2_rnai" %}
          <div class="individual-image">
            <span>
              Experiment {{ experiment.id }}, well {{ position.well }}
            </span>

            <div class="image-wrapper">
              <img src="{% get_image experiment position %}" \>
            </div>
          </div>
        {% endfor %}
        </div>
      </td>

      <td>
        <span class="title">
          N2 control
        </span>

        <div class="rotating-images">
        {% for experiment in experiments|keyvalue:"n2_l4440" %}
          {% for l4440_well in l4440_wells %}
            <div class="individual-image">
              <span>
                Experiment {{ experiment.id }}, well {{ l4440_well.well }}
              </span>

              <div class="image-wrapper">
                <img src="{% get_image experiment l4440_well %}" \>
              </div>
            </div>
          {% endfor %}
        {% endfor %}
        </div>
      </td>
    </tr>
  </table>
{% endfor %}

{% endblock %}
